within SolarTherm.Validation.Datasets;

package Rahjoo_Fig3_Dataset "Provides the initial temerature and enthalpy distributions of the validation case used by Niedermeier (2018) based on Pacheco (2002) experimental data"
  import SI = Modelica.SIunits;
  import CN = Modelica.Constants;
  package Fluid = SolarTherm.Materials.Air_Table;
  package Filler = SolarTherm.Materials.Geopolymer_Rahjoo_2022;
  //Niedermeier's Simulation Output
  constant SI.Length zdL_sim_0h[4] = {0.0,0.1,0.5,1.0};
  constant SI.Temperature T_K_0h[4] = {293.15,293.15,293.15,293.15};
  constant SI.Time T_inlet_times[93] = {48.3, 488.0, 927.6, 1372.7, 1832.8, 2180.4, 2662.1, 3112.9, 3495.0, 3991.2, 4405.6, 4832.0, 5029.0, 5423.0, 5844.6, 6284.1, 6686.4, 7126.1, 7619.8, 8042.8, 8445.3, 8931.6, 9345.2, 9835.8, 10241.3, 10680.9, 11116.3, 11584.0, 11972.6, 12409.1, 12845.1, 13298.2, 13732.8, 14138.8, 14546.8, 14928.9, 15390.8, 15627.0, 16018.5, 16182.2, 16576.6, 16953.8, 17331.0, 17548.1, 17913.4, 18316.4, 18701.0, 19058.4, 19354.2, 19756.0, 20077.2, 20467.7, 20732.6, 21044.2, 21385.6, 21749.2, 22071.9, 22405.6, 22783.0, 23134.6, 23502.6, 23767.1, 24092.8, 24410.4, 24764.0, 25083.2, 25428.4, 25663.0, 26048.8, 26428.0, 26817.9, 27272.9, 27737.2, 28168.5, 28577.0, 29068.9, 29466.1, 29961.5, 30371.1, 30326.5, 30841.7, 31218.5, 31685.9, 32120.0, 32565.1, 33004.7, 33426.2, 33884.1, 34357.7, 34727.7, 35202.7, 35642.2, 35961.9};
  constant SI.Temperature T_inlet_TK[93] = {294.02, 294.79, 295.08, 295.64, 296.45, 297.40, 297.60, 298.22, 298.90, 299.99, 300.49, 301.05, 300.86, 301.96, 302.32, 302.47, 303.16, 303.60, 304.01, 304.44, 305.09, 305.23, 306.03, 306.68, 307.36, 307.65, 308.43, 309.33, 310.06, 311.00, 312.21, 313.72, 315.11, 316.25, 317.55, 318.46, 319.86, 321.36, 322.66, 323.87, 325.17, 327.01, 328.44, 330.28, 332.29, 334.34, 335.71, 337.50, 339.31, 341.35, 343.17, 345.40, 346.98, 348.33, 350.10, 352.13, 354.23, 356.43, 358.12, 360.15, 362.30, 364.43, 366.44, 368.21, 370.03, 371.59, 373.22, 374.63, 376.13, 378.00, 379.03, 380.04, 380.76, 381.81, 382.09, 382.66, 383.66, 384.10, 384.45, 383.35, 384.74, 385.34, 385.95, 385.86, 386.65, 386.91, 386.74, 387.84, 387.75, 387.70, 388.33, 388.53, 388.69};
    
  constant SI.Temperature T_Pos1_times[85] = {47.7, 487.2, 926.7, 1366.2, 1805.6, 2245.1, 2749.6, 3220.2, 3643.7, 4083.2, 4522.7, 4962.2, 5401.8, 5874.7, 6280.9, 6720.3, 7159.9, 7599.5, 8039.0, 8478.5, 8918.1, 9357.8, 9797.4, 10236.9, 10676.5, 11116.0, 11555.6, 11995.1, 12434.7, 12874.4, 13314.0, 13753.6, 14193.1, 14632.8, 15312.2, 15751.9, 16191.7, 16648.0, 17071.1, 17510.7, 17950.5, 18390.2, 18829.9, 19269.7, 19709.5, 20149.4, 20589.2, 21032.3, 21499.9, 21899.4, 22348.5, 22788.4, 23228.2, 23689.6, 24124.0, 24526.8, 24987.8, 25424.7, 25707.9, 25940.1, 26270.4, 26710.3, 27187.6, 27627.5, 28067.4, 28507.3, 28947.3, 29387.2, 29696.4, 30107.0, 30546.8, 30986.7, 31426.6, 31866.5, 32140.9, 32373.0, 32559.9, 32985.9, 33425.9, 33865.7, 34305.5, 34745.3, 35201.7, 35597.2, 35924.7};
  constant SI.Temperature T_Pos1_TK[85] = {292.47, 292.49, 292.55, 292.55, 292.54, 292.54, 292.80, 293.00, 293.13, 293.19, 293.27, 293.32, 293.47, 293.83, 293.83, 293.71, 294.11, 294.20, 294.29, 294.41, 294.63, 295.34, 295.44, 295.61, 296.01, 295.96, 296.33, 296.40, 296.58, 297.05, 297.48, 297.83, 297.95, 298.38, 298.99, 299.59, 300.40, 300.85, 301.54, 301.91, 302.60, 303.25, 303.88, 304.71, 305.47, 306.50, 307.27, 308.11, 309.14, 310.02, 310.98, 311.95, 313.01, 313.97, 315.15, 316.23, 317.41, 318.60, 319.86, 320.98, 321.18, 322.31, 323.64, 324.77, 325.93, 327.02, 328.29, 329.33, 330.74, 331.06, 331.90, 332.97, 334.01, 335.19, 336.30, 336.38, 337.42, 337.21, 338.53, 339.28, 340.05, 340.95, 341.72, 342.50, 343.09};
  
  constant SI.Temperature T_Pos2_times[82] = {87.8, 527.4, 966.9, 1406.5, 1846.0, 2269.4, 2964.9, 3404.4, 3843.9, 4283.4, 4722.9, 5162.4, 5601.8, 6041.5, 6443.6, 6920.5, 7360.1, 7815.6, 8239.2, 8678.9, 9118.5, 9558.0, 9997.6, 10437.0, 10876.7, 11316.3, 11755.9, 12195.4, 12635.1, 13074.6, 13514.2, 13953.9, 14393.4, 14833.2, 15272.9, 15712.5, 16169.3, 16597.1, 17031.4, 17471.3, 17911.1, 18350.8, 18790.6, 19230.4, 19670.1, 20135.0, 20587.0, 20989.4, 21424.9, 21845.3, 22276.2, 22756.0, 23163.5, 23654.0, 24082.1, 24488.7, 24964.1, 25391.7, 25846.5, 26268.5, 26684.9, 27145.2, 27562.8, 28053.4, 28468.4, 28859.9, 29308.2, 29731.0, 30172.6, 30615.3, 31033.5, 31520.2, 31910.1, 32393.7, 32794.7, 33287.1, 33701.1, 34131.7, 34606.4, 35026.4, 35466.2, 35822.6};
  constant SI.Temperature T_Pos2_TK[82] = {293.02, 293.12, 293.24, 293.47, 293.48, 293.44, 294.25, 294.29, 294.29, 294.29, 294.30, 294.30, 294.29, 294.64, 294.58, 294.89, 295.06, 295.21, 295.44, 296.05, 296.26, 296.38, 296.76, 296.62, 297.15, 297.26, 297.76, 297.65, 298.22, 298.45, 298.63, 299.12, 299.37, 300.19, 300.63, 301.09, 301.41, 301.67, 302.16, 303.26, 304.07, 304.62, 305.38, 306.39, 307.01, 307.37, 308.22, 309.08, 310.46, 311.42, 312.42, 313.37, 314.12, 315.77, 317.14, 318.23, 319.63, 320.72, 321.82, 323.04, 324.24, 325.96, 327.12, 328.53, 329.68, 330.60, 331.82, 333.00, 333.94, 334.85, 336.16, 337.27, 337.95, 339.08, 340.03, 341.11, 341.71, 342.68, 343.50, 344.68, 345.68, 345.87};
  
  constant SI.Temperature T_Pos3_times[83] = {88.3, 527.8, 967.3, 1406.9, 1846.3, 2285.7, 2725.3, 3165.0, 3604.5, 4044.0, 4483.5, 4923.0, 5362.5, 5802.1, 6241.8, 6681.3, 7120.9, 7560.5, 7999.9, 8439.5, 8879.1, 9352.9, 9758.3, 10233.0, 10600.0, 11114.4, 11499.9, 11972.8, 12358.3, 12835.4, 13274.9, 13748.9, 14154.1, 14556.3, 15033.6, 15483.2, 15912.9, 16352.8, 16792.3, 17253.6, 17688.5, 18095.0, 18542.8, 18991.2, 19456.7, 19875.2, 20310.7, 20771.7, 21190.5, 21667.8, 22035.1, 22545.3, 22922.4, 23362.3, 23847.1, 24203.4, 24665.3, 25123.3, 25546.9, 26006.7, 26395.8, 26802.2, 27190.0, 27630.1, 28083.3, 28470.1, 28919.4, 29361.3, 29768.7, 30236.4, 30629.6, 31029.7, 31471.7, 31909.4, 32338.1, 32789.2, 33216.5, 33676.2, 34104.6, 34582.6, 35025.6, 35453.8, 35827.9};
  constant SI.Temperature T_Pos3_TK[83] = {294.13, 294.23, 294.24, 294.54, 294.46, 294.21, 294.51, 295.15, 295.15, 295.16, 295.16, 295.21, 295.22, 295.62, 296.17, 296.22, 296.39, 296.75, 296.70, 296.79, 297.12, 297.27, 297.71, 297.74, 297.82, 298.45, 298.65, 298.97, 298.79, 299.66, 299.79, 300.45, 300.47, 300.73, 301.66, 302.17, 302.71, 303.66, 303.86, 304.51, 305.45, 306.10, 306.85, 307.71, 308.64, 309.34, 310.46, 311.52, 312.73, 313.50, 314.35, 315.70, 316.85, 318.15, 319.57, 320.75, 322.06, 323.54, 324.79, 326.26, 327.64, 328.40, 330.06, 331.50, 332.65, 334.10, 334.96, 336.36, 337.56, 338.75, 339.71, 341.09, 341.78, 343.13, 343.93, 345.13, 345.89, 346.75, 347.64, 348.54, 349.60, 350.58, 351.24};
  
  
  constant SI.MassFlowRate Massflow_mflow[25] = {0.0000, 0.0000, 0.3177, 0.5756, 0.8249, 1.1343, 1.1339, 1.1421, 1.1417, 1.1241, 1.1237, 1.1147, 1.1229, 1.1053, 1.1049, 1.0959, 1.0951, 1.0775, 1.0814, 0.7670, 0.0010, 0.0092, 0.0088, 0.0000, 0.0000};
  
  function Initial_Temperature_f "Input a height array, obtain a Temperature array"
    input SI.Length[:] z_f;
    output SI.Temperature[size(z_f,1)] T_f;
  protected
    Integer N_f = size(z_f,1);
    Integer j;
    SI.Length z_data[4] = {0.0,0.0435,0.9565,1.0};
    SI.Temperature T_data[4] = {398.74,399.15,407.75,408.1595};
  algorithm
    for i in 1:N_f loop
        T_f[i] := SolarTherm.Utilities.Interpolation.Interpolate1D(z_data,T_data,z_f[i]);
    end for;
  end Initial_Temperature_f;
  
  function Initial_Enthalpy_f "Input height array, output enthalpy array based on constant SolarSalt properties"
    input SI.Length[:] z_f;
    output SI.SpecificEnthalpy[size(z_f,1)] h_f;
  protected
    Integer N_f = size(z_f,1);
    Integer j;
    SI.Temperature[N_f] T_f;
    SI.Length z_data[4] = {0.0,0.0435,0.9565,1.0};
    SI.Temperature T_data[4] = {398.74,399.15,407.75,408.1595};
  algorithm
    for i in 1:N_f loop
       T_f[i] := SolarTherm.Utilities.Interpolation.Interpolate1D(z_data,T_data,z_f[i]);
       h_f[i] := Fluid.h_Tf(T_f[i]);
    end for;
  end Initial_Enthalpy_f;
  
  function Initial_Temperature_p "Input height array and number of particle CVs, output enthalpy array based on constant Quartzite_Sand properties"
    input SI.Length[:] z_f;
    input Integer N_p;
    output SI.Temperature[size(z_f,1),N_p] T_p;
  protected
    Integer N_f = size(z_f,1);
    Integer j;
    SI.Length z_data[4] = {0.0,0.0435,0.9565,1.0};
    SI.Temperature T_data[4] = {398.74,399.15,407.75,408.1595};
  algorithm
    for i in 1:N_f loop
      for k in 1:N_p loop
          T_p[i,k] := SolarTherm.Utilities.Interpolation.Interpolate1D(z_data,T_data,z_f[i]);
      end for;
    end for;
  end Initial_Temperature_p;
  
  function Initial_Enthalpy_p "Input height array and number of particle CVs, output enthalpy array based on constant Quartzite_Sand properties"
    input SI.Length[:] z_f;
    input Integer N_p;
    output SI.SpecificEnthalpy[size(z_f,1),N_p] h_p;
  protected
    Integer N_f = size(z_f,1);
    Real T;
    Integer j;
    SI.Length z_data[4] = {0.0,0.0435,0.9565,1.0};
    SI.Temperature T_data[4] = {398.74,399.15,407.75,408.1595};   
  algorithm
    for i in 1:N_f loop
      for k in 1:N_p loop
        T := SolarTherm.Utilities.Interpolation.Interpolate1D(z_data,T_data,z_f[i]);
        h_p[i,k] := Filler.h_Tf(T,0);
      end for;
    end for;
  end Initial_Enthalpy_p;
  
  function Timeseries_mflow "Input time(s) output mass flow rate (kg/s)"
    input SI.Time t;
    output SI.MassFlowRate m_flow;
  protected
    SI.Time t_data[25] = {0.00, 1265.11, 1794.69, 2177.16, 2618.48, 3618.80, 4854.48, 6031.33, 7237.59, 8473.28, 9620.70, 10856.39, 12062.66, 13268.92, 14475.19, 15652.03, 18005.72, 19241.41, 20403.54, 21536.25, 22830.78, 24007.63, 25243.31, 26420.16, 27626.42};
    SI.MassFlowRate mflow_data[25] = {0.0000, 0.0000, 0.3177, 0.5756, 0.8249, 1.1343, 1.1339, 1.1421, 1.1417, 1.1241, 1.1237, 1.1147, 1.1229, 1.1053, 1.1049, 1.0959, 1.0951, 1.0775, 1.0814, 0.7670, 0.0010, 0.0092, 0.0088, 0.0000, 0.0000};
  algorithm
    m_flow := SolarTherm.Utilities.Interpolation.Interpolate1D(t_data,mflow_data,t);
  end Timeseries_mflow;
  
  function Timeseries_TinletK "Input time(s) output inlet fluid temperature (K)"
    input SI.Time t;
    output SI.MassFlowRate T_inlet;
  protected
    SI.Time t_data[74] = {0.0, 1080.0, 2442.0, 2559.6, 2647.9, 2736.2, 2824.4, 2883.3, 2942.1, 3001.0, 3059.8, 3089.2, 3206.9, 3236.3, 3324.6, 3427.6, 3471.7, 3530.5, 3589.4, 3707.1, 3942.4, 4236.6, 4619.1, 4913.3, 5325.2, 5766.5, 6090.2, 6678.6, 7090.5, 7443.5, 7884.9, 8326.2, 8708.6, 9150.0, 9620.7, 10297.4, 10738.7, 11533.1, 12033.2, 12415.7, 12827.6, 13357.2, 14004.4, 14681.1, 15210.7, 15799.1, 16387.6, 16858.3, 17623.2, 18152.8, 18770.7, 19241.4, 19976.9, 20359.4, 21109.6, 21565.7, 21742.2, 22007.0, 22095.3, 22212.9, 22389.5, 22507.2, 22654.3, 22830.8, 23125.0, 23389.8, 23831.1, 24243.0, 24684.3, 25125.6, 25772.9, 26302.5, 27038.0, 27626.4};
    SI.Temperature T_data[74] = {298.15, 298.15, 374.85, 379.58, 383.45, 387.97, 392.27, 396.14, 399.36, 402.16, 406.46, 409.68, 415.49, 420.43, 423.88, 429.25, 431.62, 435.49, 438.07, 441.08, 444.52, 446.88, 448.92, 450.74, 453.11, 455.47, 457.19, 459.98, 461.91, 463.84, 465.77, 467.49, 469.21, 470.71, 472.43, 474.57, 476.29, 479.18, 480.79, 482.08, 482.51, 483.58, 484.22, 484.64, 484.74, 484.63, 484.73, 484.84, 484.62, 484.40, 484.18, 483.53, 482.66, 482.01, 479.43, 476.41, 471.46, 461.78, 456.62, 450.39, 443.07, 437.26, 431.89, 425.43, 418.98, 415.32, 411.02, 408.43, 408.64, 409.29, 409.50, 409.71, 410.13, 410.34};
  algorithm
    T_inlet := SolarTherm.Utilities.Interpolation.Interpolate1D(t_data,T_data,t);
  end Timeseries_TinletK;
    
end Rahjoo_Fig3_Dataset;